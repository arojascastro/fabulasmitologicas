<?xml version="1.0" encoding="UTF-8"?>
  
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:tei="http://www.tei-c.org/ns/1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xpath-default-namespace="http://www.tei-c.org/ns/1.0" exclude-result-prefixes="xs tei" version="2.0">

  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@*, node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="l">
    <xsl:copy>
      <xsl:apply-templates select="@*, node()" mode="wrap">
        <xsl:with-param name="words" as="xs:string+"
          select="
            ('Venus', 'Júpiter', 'Sol', 'Marte', 'Amor', 'Filomena', 'Neptuno', 'Ulises', 'Adonis', 'Circe', 'Febo', 'Eurídice', 'Tetis', 'Orfeo', 'Progne', 'Aurora', 'Dios', 'Dafne', 'Faetón',
            'Galatea', 'Ceres', 'Europa', 'Grecia', 'Apolo', 'Flora', 'Psique', 'Andrómeda', 'Atalanta', 'Alcides', 'Polifemo', 'Diana', 'Vulcano', 'Climene', 'Dïana', 'Leandro', 'Acis', 'Atlante', 'Perseo', 'Proserpina', 'Baco', 'Juno', 'Minerva', 'Palas', 'Plutón', 'Pomona', 'Musa', 'Alba', 'Fénix', 'Himeneo', 'Leda', 'Leonor', 'Palamedes', 'Radamanto', 'Aristeo', 'Silvio', 'Acteón', 'Agamenón', 'Helena', 'Medusa', 'Mercurio', 'Mirra', 'Tritón', 'Aquiles', 'Argos', 'Doris', 'Fama', 'Hero', 'Nereo', 'Ninfa', 'Pan', 'Parca', 'Paris', 'Peneo', 'Tereo', 'Tisbe', 'Tonante', 'Trace', 'Amaltea', 'Anfitrite', 'Cerbero', 'Cibeles', 'Dánae', 'Euro', 'Euterpe', 'Filemo', 'Fineo', 'Francisco', 'Horas', 'Nonacrina', 'Píramo', 'Tifeo', 'Tiresias', 'Virgilio', 'Aquilón', 'Cefeo', 'Céfiro', 'Egipto', 'Erebo', 'Euríloco', 'Glauco', 'Helicona', 'Inaco', 'Jove', 'Lisis', 'Menelao', 'Musas', 'Siringa', 'Temis', 'Alejandro', 'Amarílida', 'Anquises', 'Antifates', 'Antonio', 'Aries', 'Astrea', 'Austro', 'Clío', 'Eco', 'Escila', 'Etón', 'Favonio', 'Fernando', 'Fílida', 'Fitón', 'Flegón', 'Furias', 'Hipómenes', 'Iris', 'Ladón', 'Lampecia', 'Latona', 'Lilibeo', 'Luna', 'Melpómene', 'Pandïón', 'Partenio', 'Pedro', 'Platón', 'Vertuno', 'Agora', 'Albano', 'Angélica', 'Anticlea', 'Aretusa', 'Briareo', 'Celos', 'Césares', 'Cínaris', 'Cintia', 'Cintio', 'Cristo', 'Cupidillo', 'Cupido', 'Dafnes', 'Delia', 'Diomedes', 'Egisto', 'Estrimón', 'Euxino', 'Faetusa', 'Fortuna', 'Ganimedes', 'Lete', 'Lisandro', 'Mantüano', 'María', 'Melampo', 'Menón', 'Mira', 'Morfeo', 'Noto', 'Océano', 'Ocidente', 'Pangeo', 'París', 'Pegaso', 'Peloro', 'Penélope', 'Pigmaleón', 'Polidamante', 'Tirreno', 'Toante', 'Tracio', 'Acaya', 'Acrisio', 'Alcino', 'Alfeo', 'Alonso', 'Amarilis', 'Andrómaca', 'Anteros', 'Antiflor', 'Antímaco', 'Ariete', 'Arión', 'Aristarco', 'Arminda', 'Atamante', 'Atira', 'Báratro', 'Bóreas', 'Boscán', 'Bronte', 'Calíope', 'Calisto', 'Cancro', 'Caribdis', 'Catón', 'Clicie', 'Colcos', 'Cupidos', 'Dardania', 'Dauro', 'Dédalo', 'Deifrida', 'Deyanira', 'Dimos', 'Dórida', 'Dulinto', 'Elena', 'Elisio', 'Elisios', 'Enrique', 'Eolia', 'Esculapio', 'Estigio', 'Estinfalo', 'Euridice', 'Febe', 'Febo', 'Fenice', 'Garcilaso', 'Griego', 'Hécuba', 'Helesponto', 'Helicón', 'Herrera', 'Himineo', 'Hipocrene', 'Horacio', 'Hortensio', 'Ícaro', 'Imperio', 'Invierno', 'Itis', 'Jacinto', 'Jano', 'Janto', 'Jonio', 'Laertes', 'Láquesis', 'Lenona', 'Lucina', 'Manrique', 'Marsias', 'Mendoza', 'Midas', 'Morea', 'Narciso', 'Naya', 'Negroponte', 'Neofile', 'Nise', 'Nísida', 'Ocaso', 'Orbelos', 'Orco', 'Oronte', 'Pado', 'Parcas', 'Peleo', 'Penélopes', 'Pimpla', 'Pirro', 'Poro', 'Presto', 'Príamo', 'Prometeo', 'Quimera', 'Quinto', 'Quirón', 'Ricardo', 'Sanazaro', 'Saturno', 'Scila', 'Sibila', 'Tártaro', 'Tauris', 'Tauro', 'Tempe', 'Terco', 'Teseo', 'Tesifonte', 'Tierra', 'Titán', 'Titón', 'Tolomeo', 'Traición', 'Tulio', 'Venganza', 'Vertumno', 'Vira', 'Virgen', 'Zaquinto', 'Zéfiro', 'Abisino', 'Aborrecido', 'Abrahán', 'Acates', 'Acayo', 'Accidalia', 'Acetada', 'Acloceramnia', 'Acroceraunia', 'Acuario', 'Agenor', 'Aglauro', 'Aglauros', 'Agnus', 'Alaquesis', 'Alargado', 'Alastor', 'Albante', 'Albis', 'Alce', 'Alceo', 'Alecto', 'Alejandros', 'Aleto', 'Alfesibeo', 'Amaina', 'Amatonta', 'Ambición', 'Anacreonte', 'Anastasio', 'Anfriso', 'Ángel', 'Angerïano', 'Aníbal', 'Antandro', 'Anteo', 'Anteón', 'Anticleo', 'Antígenes', 'Apeles', 'Apogeo', 'Apolos', 'Apuleyo', 'Aqueronte', 'Aquerontes', 'Aragne', 'Aragnes', 'Arajes', 'Archipoeta', 'Argo', 'Ariadne', 'Arimaspo', 'Aristóteles', 'Arme', 'Arpías', 'Arquelao', 'Arte', 'Arturo', 'Arturos', 'Astrífero', 'Atanasio', 'Atica', 'Atila', 'Atis', 'Atreo', 'Atrida', 'Augusto', 'Aureliano', 'Auriflor', 'Ausente', 'Ausonio', 'Austral', 'Austrea', 'Austrina', 'Autor', 'Aver', 'Bacantes', 'Baraona', 'Basareo', 'Baucis', 'Belona', 'Berbería', 'Berenice', 'Blandura', 'Boote', 'Borja', 'Bradamante', 'Bucentoro', 'Cadmo', 'Cafareos', 'Calabrio', 'Calidonia', 'Calificarle', 'Calipso', 'Camila', 'Candía', 'Capricornio', 'Cárdeno', 'Caribdi', 'Carlos', 'Caronte', 'Carpacio', 'Casandra', 'Castigo', 'Castillo', 'Castro', 'Catay', 'Cáusanos', 'Céfalo', 'Celio', 'Centauros', 'Cérbero', 'Chelonata', 'Cicerón', 'Cíclopes', 'Ciconio', 'Ciego', 'Cielo', 'Cigno', 'Cilenio', 'Cileno', 'Cilicia', 'Cinaras', 'Cinosura', 'Cipro', 'Cisne', 'Citero', 'Claudïano', 'Clorinardo', 'Cobramos', 'Codicia', 'Cogidos', 'Coléricos', 'Conjus', 'Corebo', 'Corón', 'Creso', 'Crispín', 'Dámaso', 'Dame', 'Débora', 'Didimeo', 'Diocleciana', 'Diómedes', 'Diose', 'Dioses', 'Dominus', 'Donato', 'Dorceo', 'Doricleo', 'Dragantea', 'Dromas', 'Durancio', 'Durmiendo', 'Efebo', 'Efesiosen', 'Egina', 'Egipán', 'Electra', 'Elide', 'Elisa', 'Elíseo', 'Elíseos', 'Elísios', 'Elpenor', 'Emo', 'Encélado', 'Encélados', 'Endimïón', 'Enio', 'Enios', 'Envidia', 'Eólida', 'Ericina', 'Erícina', 'Erictonio', 'Eridaneidas', 'Erígone', 'Erimanto', 'Erimnis', 'Eriteo', 'Escálafo', 'Escanderbeya', 'Escandia', 'Escilas', 'Escirón', 'Escorpión', 'Espiaña', 'Esqueneo', 'Estacio', 'Esterope', 'Estéropes', 'Estige', 'Estío', 'Estrazas', 'Estrella', 'Etnea', 'Etolo', 'Eton', 'Etonte', 'Etusa', 'Euboea', 'Euménides', 'Eurípides', 'Eva', 'Evandro', 'Fabro', 'Faetonte', 'Falsa', 'Faro', 'Febea', 'Febeteo', 'Félix', 'fénix', 'Ferrarés', 'Fértilísimas', 'Fidia', 'Fieras', 'Filelfo', 'Filemón', 'Fileno', 'Filodoce', 'Filonópolis', 'Filonte', 'Flegetón', 'Flegetonte', 'Floro', 'Frasidemo', 'Galán', 'Garcerán', 'Garumna', 'Gelio', 'Gil', 'González', 'Górgonas', 'Gregorio', 'Griegos', 'Guillén', 'Gutiérrez', 'Guzmán', 'Hárpalo', 'Harpes', 'Hebras', 'Hemo', 'Hemonia', 'Henares', 'Heráclito', 'Hernández', 'Hesperia', 'Hesperias', 'Hespérides', 'Hétor', 'Hétores', 'Hidaspe', 'Hileo', 'Hipota', 'Hircania', 'Homero', 'Honor', 'Icarillo', 'Icario', 'Icnobates', 'Idas', 'Ignorancia', 'Iieo', 'Iliberia', 'Inarime', 'Indimión', 'Indo', 'Infantes', 'Intimado', 'Ioanes', 'Ioseph', 'Ira', 'Isidro', 'Ismaro', 'Ismenia', 'Ismenio', 'Ismeno', 'Istro', 'Jasón', 'Jáuregui', 'Jesús', 'Jodoco', 'Jovio', 'Juan', 'Juana', 'Juego', 'Jüez', 'Junón', 'Justicia', 'Juvenal', 'Juvenco', 'Lacón', 'Lacónico', 'Ladon', 'Lagne', 'Lambino', 'Laocón', 'Laocontes', 'Laomedón', 'Lasso', 'Latino', 'Latmo', 'Lestrigonia', 'Leucón', 'Levante', 'Libetro', 'Libres', 'Licas', 'Lícidas', 'Licor', 'Lieo', 'Ligeris', 'Lilibeos', 'Lincisto', 'Liñán', 'Lipso', 'Lisipo', 'Lisonja', 'Livio', 'Locura', 'Lope', 'López', 'Lorenzo', 'Lucano', 'Lucrecia', 'Lucrecio', 'Luso', 'Luz', 'Lydia', 'Macrobio', 'Magnesia', 'Mahoma', 'Maina', 'Malea', 'Malicia', 'Manto', 'Margarita', 'Marina', 'Marmárico', 'Marte', 'Mausolo', 'Maya', 'Mayo', 'Mecenas', 'Medoro', 'Medos', 'Melanquetes', 'Melanto', 'Melas', 'Melesígenes', 'Melicerta', 'Mellcerta', 'Melpomene', 'Memoria', 'Ménalo', 'Mentira', 'Micenas', 'Miedo', 'Miguero', 'Milesio', 'Mimantes', 'Miño', 'Mirto', 'Mísero', 'Moisés', 'Momo', 'Mongibelos', 'Montoya', 'Moravia', 'Morbo', 'Mucio', 'Muerte', 'Muso', 'Nabuco', 'Nájara', 'Nape', 'Nar', 'Nasón', 'Navarino', 'Necedad', 'Negra', 'Nemeo', 'Nemesïano', 'Némesis', 'Nerón', 'Nerona', 'Nestos', 'Nevio', 'Nicandra', 'Nicteo', 'Nieto', 'Nifate', 'Nigris', 'Nilo', 'Nino', 'Nonacria', 'Nubio', 'Numen', 'Oaxes', 'Ocno', 'Oeta', 'Ogigia', 'Ognicio', 'Olimpia', 'Olimpífero', 'Orbe', 'Oresitrofo', 'Orestes', 'Orfeos', 'Orion', 'Orión', 'Orïón', 'Orneo', 'Ortigia', 'Osa', 'Otavïano', 'Ouirón', 'Ovidio', 'Pachino', 'Pados', 'Palacio', 'Palantedes', 'Palas', 'Palemo', 'Palemón', 'Pales', 'Palinuro', 'Panfilio', 'Panónfeo', 'Panopea', 'Paquino', 'Parrasio', 'Pastor', 'Patraso', 'Peces', 'Pelayo', 'Pelias', 'Pelión', 'Peloros', 'Penencia', 'Penia', 'Penteo', 'Peña', 'Perilo', 'Perla', 'Permesio', 'Perséfone', 'Perseo', 'Persia', 'Petrarca', 'Piedad', 'Pïérides', 'Pílades', 'Pimentel', 'Píndaro', 'Píndaros', 'Pindo', 'Piragmon', 'Piramiburro', 'Piro', 'Pirois', 'Pirú', 'Pitágoras', 'Pitagórico', 'Pitón', 'Plauto', 'Pluto', 'Pobreza', 'Policena', 'Policleto', 'Polidetes', 'Polimnia', 'Polo', 'Pontano', 'Potina', 'Praxiteles', 'Présaga', 'Priapo', 'Primavera', 'Prisciano', 'Procrustes', 'Promontorio', 'Prosérpina', 'Proteo', 'Protosilao', 'Prudencio', 'Psiques', 'Quersoneso', 'Quimeras', 'Quince', 'Quintana', 'Quintiliano', 'Quirino', 'Rifeo', 'Roberto', 'Ródope', 'Rumena', 'Sabeo', 'Safo', 'Saladino', 'Salas', 'Salmacis', 'Salteada', 'Sanazaros', 'Sánchez', 'Scilas', 'Sebastián', 'Sencia', 'Séneca', 'Severo', 'Sicilïano', 'Sileno', 'Silicia', 'Silio', 'Silvano', 'Silveira', 'Simetis', 'Simois', 'Simón', 'Sinón', 'Sísifo', 'Soberbia', 'Sois', 'Solón', 'Strimón', 'Suavísimo', 'Sudando', 'Suena', 'Sunio', 'Suspira', 'Syro', 'Talía', 'Tamayo', 'Tántalos', 'Tarcañota', 'Tarquinos', 'Tate', 'Tebandro', 'Tedífero', 'Tegireo', 'Telémaco', 'Tellez', 'Tenaro', 'Ténaro', 'Ténedos', 'Teolesila', 'Tepolemo', 'Terclas', 'Teridamas', 'Terón', 'Terpsícore', 'Tetes', 'Tíberis', 'Tibre', 'Tibulo', 'Ticio', 'Tiestes', 'Tifeos', 'Tifis', 'Tifonte', 'Tile', 'Timo', 'Timolo', 'Timoteo', 'Tindárida', 'Tisbica', 'Titiro', 'Tomás', 'Torpeza', 'Tórtola', 'Traigeto', 'Trimagistro', 'Trinacria', 'Trïones', 'Triste', 'Tritolemo', 'Tritones', 'Triviño', 'Troco', 'Túmido', 'Túrbido', 'Turnebo', 'Tusca', 'Ulises', 'Urania', 'Usura', 'Vala', 'Valdivieso', 'Valenzuela', 'Valereo', 'Vandalia', 'Vander', 'Vargas', 'Varona', 'Vase', 'Vejez', 'Vellocino', 'Ventura', 'Venusino', 'Venus', 'Verano', 'Vergüenza', 'Vesta', 'Viseria', 'vitoria', 'Vituno', 'Volga', 'Vulcán', 'Vulcano', 'Vulcanos', 'Vulteyo', 'Xanto', 'Xo', 'Yélame', 'Zárate', 'Zeusis')"
        />
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="text()" mode="wrap">
    <xsl:param name="words" as="xs:string+"/>
    <xsl:param name="wrapper-name" as="xs:string" select="'persName'"/>
    <xsl:analyze-string select="." regex="{string-join($words, '|')}">
      <xsl:matching-substring>
        <xsl:element namespace="http://www.tei-c.org/ns/1.0" name="{$wrapper-name}">
          <xsl:attribute name="key">
            <xsl:value-of select="lower-case(.)"/>
          </xsl:attribute>
          <xsl:value-of select="."/>
        </xsl:element>
      </xsl:matching-substring>
      <xsl:non-matching-substring>
        <xsl:copy/>
      </xsl:non-matching-substring>
    </xsl:analyze-string>
  </xsl:template>

  <xsl:template match="@* | element()" mode="wrap">
    <xsl:copy>
      <xsl:apply-templates select="@*, node()"/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet>
